[gd_scene load_steps=8 format=3 uid="uid://dvv6hayk4kcun"]

[ext_resource type="PackedScene" uid="uid://c4dyy4kax1ogv" path="res://Scenes/DefaultUnit/BaseUnit.tscn" id="1_env67"]
[ext_resource type="Shader" path="res://Scenes/DefaultUnit/hitEffect.gdshader" id="2_5gi0p"]
[ext_resource type="PackedScene" uid="uid://bdf66a53p3661" path="res://Scenes/DefaultWeapon/bow.tscn" id="3_0drtb"]
[ext_resource type="Script" path="res://Scenes/Units/Enemies/SkeletonNoises.gd" id="4_178k8"]

[sub_resource type="Shader" id="Shader_2y081"]
code = "shader_type canvas_item;

uniform float flash_opacity = 0;
uniform vec4 flash_color : source_color = vec4(1.0,1.0,1.0,1.0);

void fragment() {
	vec4 tex_color = texture(TEXTURE, UV);
    vec3 blended_color = mix(tex_color.rgb, flash_color.rgb, flash_opacity); // Use only the RGB components for blending

	COLOR.rgb = blended_color;
	COLOR.a = tex_color.a;
}"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_w0ymd"]
resource_local_to_scene = true
shader = SubResource("Shader_2y081")
shader_parameter/flash_opacity = 0.0
shader_parameter/flash_color = Color(1, 1, 1, 1)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_jtach"]
resource_local_to_scene = true
shader = ExtResource("2_5gi0p")
shader_parameter/flash_opacity = 0.0
shader_parameter/flash_color = Color(1, 1, 1, 1)

[node name="Ranger" instance=ExtResource("1_env67")]
teamColor = "red"
walkSpeed = 10.0
runSpeed = 30.0
weaponRange = 100.0
weaponCooldown = 2.0
weaponDamage = 30

[node name="Body" parent="Art" index="0"]
material = SubResource("ShaderMaterial_w0ymd")

[node name="Head" parent="Art" index="1"]
material = SubResource("ShaderMaterial_jtach")

[node name="Bow" parent="." index="4" node_paths=PackedStringArray("own_body", "attackState") instance=ExtResource("3_0drtb")]
own_body = NodePath("..")
attackState = NodePath("../SM/Attack")

[node name="Skeleton_hit_sfx" type="AkEvent2D" parent="." index="12"]
event = {
"id": 1030092179,
"name": "Play_Skeleton_hit_v1"
}
trigger_on = 2

[node name="Skeleton_death" type="AkEvent2D" parent="." index="13"]
event = {
"id": 625299376,
"name": "Play_Skeleton_die_v1"
}

[node name="Skeleton_hit" type="AkEvent2D" parent="." index="14"]
event = {
"id": 1030092179,
"name": "Play_Skeleton_hit_v1"
}
trigger_on = 2
script = ExtResource("4_178k8")

[connection signal="Hit" from="." to="Skeleton_hit" method="_on_ranger_hit"]
